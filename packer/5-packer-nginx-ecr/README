# 1. Inicializar (descargar plugins)
packer init .

# 2. Formatear cÃ³digo (estilo)
packer fmt .

# 3. Validar todo
packer validate .

# 4. Build con variables de desarrollo
packer build -var-file=environments/dev.pkrvars.hcl .

# 5. Build con variables de producciÃ³n
packer build -var-file=environments/prod.pkrvars.hcl .

# 6. Build con override de variables
packer build \
  -var-file=environments/prod.pkrvars.hcl \
  -var "image_tags=[\"v2.0.0\",\"latest\"]" \
  .
```

## ğŸ“š Referencias y Buenas PrÃ¡cticas

### DocumentaciÃ³n Oficial de HashiCorp

1. **GuÃ­a de Buenas PrÃ¡cticas de HCL**
   - https://developer.hashicorp.com/packer/guides/hcl

2. **Estructura de Archivos**
   - https://developer.hashicorp.com/packer/guides/hcl/component-object-spec

3. **Variables y Locals**
   - https://developer.hashicorp.com/packer/guides/hcl/variables

4. **Templates**
   - https://developer.hashicorp.com/packer/docs/templates/hcl_templates

5. **Docker Builder**
   - https://developer.hashicorp.com/packer/plugins/builders/docker

### Mejores PrÃ¡cticas Clave

âœ… **Separar por responsabilidad:** Variables, sources, builds en archivos separados

âœ… **Usar `locals` para valores calculados:** Timestamps, URLs compuestas

âœ… **Scripts externos:** No inline largo, usar archivos `.sh`

âœ… **Validaciones:** Agregar `validation` blocks a variables crÃ­ticas

âœ… **Environments:** Archivos `.pkrvars.hcl` por ambiente (dev/staging/prod)

âœ… **Versionado:** Especificar versiones de plugins y Packer

âœ… **DocumentaciÃ³n:** README.md claro con ejemplos

âœ… **GitIgnore:** No commitear secrets ni cache

âœ… **Naming conventions:** 
- Archivos: `*.pkr.hcl`
- Variables: `snake_case`
- Sources: `descriptivos`

## ğŸ¯ ComparaciÃ³n: Antes vs DespuÃ©s

### âŒ Antes (MonolÃ­tico)
```
1 archivo â†’ 80 lÃ­neas â†’ DifÃ­cil mantener
```

### âœ… DespuÃ©s (Modular)
```
9 archivos â†’ ~15 lÃ­neas c/u â†’ FÃ¡cil mantener